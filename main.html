<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NeuroPlay - Professional Learning Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Space+Grotesk:wght@300;400;500;600;700&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Space Grotesk', sans-serif;
      background: #0a0a0a;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      color: white;
    }

    .space-bg {
      position: fixed;
      inset: 0;
      background: 
        linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px),
        linear-gradient(0deg, rgba(255,255,255,0.03) 1px, transparent 1px),
        radial-gradient(ellipse at center, #1a1a1a 0%, #0a0a0a 100%);
      background-size: 50px 50px, 50px 50px, 100% 100%;
      z-index: 0;
    }

    .stars {
      position: fixed;
      inset: 0;
      z-index: 1;
      pointer-events: none;
    }

    .star {
      position: absolute;
      background: #FFFFFF;
      border-radius: 50%;
      animation: twinkle 3s infinite;
    }

    @keyframes twinkle {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }

    section {
      display: none;
      min-height: 100vh;
      opacity: 0;
      position: relative;
      z-index: 10;
    }

    section.active {
      display: block;
      opacity: 1;
    }

    .typing-text {
      font-family: 'Orbitron', sans-serif;
      overflow: hidden;
      border-right: 3px solid #FFFFFF;
      white-space: nowrap;
      opacity: 0;
      transform: scale(0.8);
      animation: entryPop 0.6s ease-out forwards, typing 3s steps(22) 1s forwards, blink 0.7s infinite 1s;
    }

    @keyframes entryPop {
      0% { opacity: 0; transform: scale(0.8) translateY(-50px); }
      100% { opacity: 1; transform: scale(1) translateY(0); }
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    .blinking-dot {
      animation: blink-dot 1s infinite;
      color: #FFFFFF;
    }

    @keyframes blink-dot {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    .motto-word {
      display: inline-block;
      opacity: 0;
      transform: translateY(50px);
    }

    .glass-card {
      background: rgba(20, 20, 20, 0.9);
      backdrop-filter: blur(20px);
      border: 2px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
      transition: all 0.4s ease;
    }

    .glass-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 0 50px rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
    }

    .neon-text {
      color: #FFFFFF;
      text-shadow: 
        0 0 10px #FFFFFF,
        0 0 20px #FFFFFF,
        0 0 30px #FFFFFF,
        0 0 40px #FFFFFF;
    }

    .neon-pink {
      color: #FF10F0;
      text-shadow: 
        0 0 10px #FF10F0,
        0 0 20px #FF10F0,
        0 0 30px #FF10F0;
    }

    .neon-cyan {
      color: #00FFFF;
      text-shadow: 
        0 0 10px #00FFFF,
        0 0 20px #00FFFF,
        0 0 30px #00FFFF;
    }

    .neon-green {
      color: #39FF14;
      text-shadow: 
        0 0 10px #39FF14,
        0 0 20px #39FF14,
        0 0 30px #39FF14;
    }

    .space-btn {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      font-weight: 600;
      border: 2px solid #FFFFFF;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
    }

    .space-btn:hover {
      box-shadow: 0 0 40px rgba(255, 255, 255, 0.6);
      transform: scale(1.05);
    }

    .space-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s;
    }

    .space-btn:hover::before {
      left: 100%;
    }

    .option-card {
      transition: all 0.3s ease;
      cursor: pointer;
      background: rgba(20, 20, 20, 0.8);
      border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .option-card:hover {
      transform: translateX(10px);
      box-shadow: 0 0 30px rgba(255, 255, 255, 0.4);
      border-color: #FFFFFF;
    }

    .option-card.selected {
      background: rgba(255, 255, 255, 0.2);
      border-color: #FFFFFF !important;
      box-shadow: 0 0 40px rgba(255, 255, 255, 0.6);
    }

    .game-card {
      background: rgba(20, 20, 20, 0.8);
      border: 2px solid rgba(255, 255, 255, 0.3);
      transition: all 0.4s ease;
      cursor: pointer;
    }

    .game-card:hover {
      transform: translateY(-10px) scale(1.05);
      box-shadow: 0 0 50px rgba(255, 255, 255, 0.5);
      border-color: #FFFFFF;
    }

    .custom-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }

    .custom-modal.show {
      display: flex;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background: rgba(20, 20, 20, 0.95);
      border: 3px solid #FFFFFF;
      border-radius: 20px;
      padding: 40px;
      max-width: 500px;
      text-align: center;
      animation: slideIn 0.4s ease-out;
      box-shadow: 0 0 60px rgba(255, 255, 255, 0.5);
    }

    @keyframes slideIn {
      from { transform: scale(0.7) translateY(-50px); opacity: 0; }
      to { transform: scale(1) translateY(0); opacity: 1; }
    }

    .tile-game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 30px;
    }

    .tile-row {
      display: flex;
      gap: 20px;
    }

    .tile {
      width: 120px;
      height: 120px;
      background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
      border: 3px solid #FFFFFF;
      border-radius: 15px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 32px;
      font-weight: bold;
      color: white;
      position: relative;
      overflow: hidden;
    }

    .tile:hover {
      transform: translateY(-5px);
      box-shadow: 0 0 30px rgba(255, 255, 255, 0.6);
    }

    .tile.correct {
      background: linear-gradient(135deg, #39FF14 0%, #00FF00 100%);
      animation: correctPulse 0.5s ease;
    }

    .tile.wrong {
      background: linear-gradient(135deg, #FF0000 0%, #8B0000 100%);
      animation: collapse 0.8s ease forwards;
    }

    @keyframes correctPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    @keyframes collapse {
      0% { transform: translateY(0) rotateX(0); opacity: 1; }
      50% { transform: translateY(20px) rotateX(45deg); opacity: 0.5; }
      100% { transform: translateY(100px) rotateX(90deg); opacity: 0; }
    }

    .character {
      width: 60px;
      height: 80px;
      background: linear-gradient(135deg, #FF10F0 0%, #FF6B9D 100%);
      border-radius: 10px;
      position: absolute;
      bottom: 20px;
      transition: all 0.5s ease;
      animation: characterIdle 2s infinite;
    }

    @keyframes characterIdle {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .character::before {
      content: 'üòä';
      position: absolute;
      top: 5px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 30px;
    }

    .home-tile {
      background: linear-gradient(135deg, #FFFFFF 0%, #CCCCCC 100%);
      border-color: #999999;
    }

    .home-tile::before {
      content: 'üè†';
      position: absolute;
      font-size: 40px;
    }

    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.4); }
      50% { box-shadow: 0 0 40px rgba(255, 255, 255, 0.8); }
    }

    .pulse-glow {
      animation: pulse-glow 2s infinite;
    }

    .loader {
      width: 60px;
      height: 60px;
      border: 5px solid rgba(255, 255, 255, 0.2);
      border-top-color: #FFFFFF;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    input, select {
      color: white !important;
    }

    input::placeholder {
      color: rgba(255, 255, 255, 0.5) !important;
    }

    /* AI Chatbot Styles */
    #ai-agent-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #10a37f;
      display: none;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
      z-index: 999;
      transition: transform 0.3s ease;
    }

    #ai-agent-btn.show {
      display: flex;
    }

    #ai-agent-btn:hover {
      transform: scale(1.1);
    }

    #ai-agent-btn img {
      width: 35px;
      height: 35px;
    }

    .chat-container {
      width: 400px;
      height: 600px;
      background: #343541;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      position: fixed;
      bottom: 100px;
      right: 20px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
      overflow: hidden;
      z-index: 1000;
    }

    .chat-container.hidden {
      display: none;
    }

    .chat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #444654;
      padding: 15px;
      border-bottom: 1px solid #4a4a4a;
    }

    .chat-header h2 {
      font-size: 18px;
    }

    .chat-header span {
      cursor: pointer;
      font-size: 18px;
    }

    .subject-menu {
      display: flex;
      justify-content: center;
      gap: 5px;
      padding: 5px;
      background: #40414f;
    }

    .subject-menu button {
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      background: #10a37f;
      color: #fff;
      cursor: pointer;
      font-size: 12px;
    }

    .subject-menu button:hover {
      background: #0d8e6d;
    }

    .chat-window {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .message {
      max-width: 75%;
      padding: 10px 15px;
      border-radius: 15px;
      word-wrap: break-word;
    }

    .ai-message {
      background: #444654;
      align-self: flex-start;
      border-bottom-left-radius: 5px;
    }

    .user-message {
      background: #10a37f;
      align-self: flex-end;
      border-bottom-right-radius: 5px;
    }

    .typing-indicator {
      padding: 10px;
      font-style: italic;
      color: #bbb;
    }

    .typing-indicator.hidden {
      display: none;
    }

    .chat-input-container {
      display: flex;
      border-top: 1px solid #4a4a4a;
      background: #40414f;
      padding: 10px;
    }

    #user-input {
      flex: 1;
      padding: 10px;
      border-radius: 8px;
      border: none;
      background: #343541;
      color: #fff;
    }

    #user-input::placeholder {
      color: #bbb;
    }

    #send-btn {
      margin-left: 5px;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      background: #10a37f;
      color: #fff;
      cursor: pointer;
    }

    #send-btn:hover {
      background: #0d8e6d;
    }
  </style>
</head>
<body>

  <div class="space-bg"></div>
  <div class="stars" id="stars"></div>

  <div id="customModal" class="custom-modal">
    <div class="modal-content">
      <div class="text-6xl mb-4" id="modalEmoji">‚ö†Ô∏è</div>
      <h2 class="text-3xl font-bold text-white mb-4" id="modalTitle">Alert</h2>
      <p class="text-xl text-gray-300 mb-6" id="modalMessage">Message here</p>
      <button onclick="closeModal()" class="space-btn bg-transparent px-8 py-3 rounded-xl text-white text-lg font-bold">
        Got it! üöÄ
      </button>
    </div>
  </div>

  <!-- HERO SECTION -->
  <section id="heroSection" class="active">
    <div class="fixed inset-0 flex flex-col items-center justify-center z-10 cursor-pointer" onclick="goToAbout()">
      <div class="text-center mb-16">
        <h1 class="text-6xl md:text-8xl font-bold text-white mb-8 inline-block">
          <span class="typing-text" id="heroTitle" style="width: 0;">Welcome to NeuroPlay</span><span class="blinking-dot text-7xl md:text-9xl">.</span>
        </h1>
      </div>
      
      <div class="flex items-center gap-6 text-4xl md:text-6xl font-bold mb-20" id="mottoContainer">
        <span class="motto-word neon-text">Discover</span>
        <span class="text-white text-5xl">‚Ä¢</span>
        <span class="motto-word neon-pink">Engage</span>
        <span class="text-white text-5xl">‚Ä¢</span>
        <span class="motto-word neon-cyan">Excel</span>
      </div>
      
      <div class="inline-flex items-center gap-3 text-white text-lg px-8 py-4 rounded-full bg-white/5 backdrop-blur-md border-2 border-white/30 pulse-glow hover:scale-110 transition-transform">
        <span>‚ú® Tap anywhere to embark on your journey</span>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
        </svg>
      </div>
    </div>
  </section>

  <!-- ABOUT SECTION -->
  <section id="aboutSection">
    <div class="min-h-screen flex items-center justify-center p-4 relative z-10">
      <div class="max-w-4xl text-center">
        <div class="text-8xl mb-8 animate-bounce">üéØ</div>
        <h1 class="text-5xl md:text-7xl font-bold neon-text mb-8" style="font-family: 'Orbitron', sans-serif;">
          Discover NeuroPlay
        </h1>
        <div class="glass-card rounded-3xl p-10 md:p-16">
          <p class="text-2xl md:text-4xl text-white leading-relaxed mb-6" id="aboutText">
            We craft <span class="neon-pink">intelligent learning paths</span> uniquely designed for you
          </p>
          <p class="text-xl md:text-2xl neon-cyan leading-relaxed">
            Unlock your potential with personalized education powered by cutting-edge technology! üß†‚ú®
          </p>
          <div class="mt-12">
            <button onclick="goToInteractive()" class="space-btn bg-transparent text-white px-10 py-4 rounded-full text-xl font-bold">
              Begin Your Transformation ‚Üí
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- INTERACTIVE SECTION -->
  <section id="interactiveSection">
    <div class="min-h-screen flex items-center justify-center p-4 relative z-10">
      <div class="max-w-5xl w-full text-center">
        <h1 class="text-5xl md:text-6xl font-bold neon-text mb-6" style="font-family: 'Orbitron', sans-serif;">
          üåü Select Your Role
        </h1>
        <p class="text-2xl text-white mb-12">Choose your identity to proceed</p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
          <div class="glass-card rounded-2xl p-8 cursor-pointer hover:scale-105 transition-transform" onclick="goToLogin()">
            <div class="text-6xl mb-4">üéì</div>
            <h3 class="text-3xl font-bold neon-cyan mb-3">Student</h3>
            <p class="text-white text-lg">Launch your personalized learning adventure</p>
          </div>
          
          <div class="glass-card rounded-2xl p-8 cursor-pointer hover:scale-105 transition-transform" onclick="showModal('üöß', 'Coming Soon', 'Teacher portal is under construction! Check back soon üë®‚Äçüè´')">
            <div class="text-6xl mb-4">üë®‚Äçüè´</div>
            <h3 class="text-3xl font-bold neon-pink mb-3">Teacher</h3>
            <p class="text-white text-lg">Monitor and guide student achievements</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- LOGIN SECTION -->
  <section id="loginSection">
    <div class="min-h-screen flex items-center justify-center p-4 relative z-10">
      <div class="glass-card p-10 md:p-12 rounded-3xl text-center w-full max-w-md">
        <div class="mb-8">
          <div class="w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-white to-gray-400 flex items-center justify-center shadow-lg pulse-glow">
            <span class="text-4xl">üîê</span>
          </div>
          <h1 class="text-4xl font-bold mb-3 neon-text" style="font-family: 'Orbitron', sans-serif;">
            Access Portal
          </h1>
          <p class="neon-cyan">Authenticate to unlock your journey</p>
        </div>

        <div class="space-y-4 mb-6">
          <input type="email" id="loginEmail" placeholder="Email Address" class="w-full px-4 py-4 border-2 border-white/30 bg-black/50 text-white rounded-xl focus:border-white focus:outline-none transition-all">
          <input type="password" id="loginPassword" placeholder="Password" class="w-full px-4 py-4 border-2 border-white/30 bg-black/50 text-white rounded-xl focus:border-white focus:outline-none transition-all">
        </div>

        <button id="loginBtn" class="space-btn w-full bg-white/20 text-white px-6 py-4 rounded-xl transition duration-300 font-bold text-lg mb-6">
          Initiate Journey üöÄ
        </button>

        <p class="text-gray-400 text-sm">New member? <span class="neon-cyan cursor-pointer hover:underline">Register Now</span></p>
      </div>
    </div>
  </section>

  <!-- PROFILE SECTION -->
  <section id="profileSection">
    <div class="min-h-screen flex items-center justify-center p-4 relative z-10 py-20">
      <div class="w-full max-w-4xl">
        <div class="text-center mb-8">
          <h1 class="text-4xl md:text-5xl font-bold neon-text mb-2" style="font-family: 'Orbitron', sans-serif;">Complete Your Profile</h1>
          <p class="neon-cyan text-xl">Personalize your learning experience üéØ</p>
        </div>

        <div class="glass-card rounded-3xl p-8 md:p-10">
          <form id="profileForm" class="space-y-8">
            
            <div>
              <h2 class="text-2xl font-bold text-white mb-6">üë§ Personal Information</h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <input type="text" id="fullName" placeholder="Full Name *" class="w-full px-4 py-3 border-2 border-white/30 bg-black/50 text-white rounded-xl focus:border-white focus:outline-none transition-all" required>
                <input type="date" id="dob" class="w-full px-4 py-3 border-2 border-white/30 bg-black/50 text-white rounded-xl focus:border-white focus:outline-none transition-all" required>
                <input type="email" id="profileEmail" placeholder="Email Address *" class="w-full px-4 py-3 border-2 border-white/30 bg-black/50 text-white rounded-xl focus:border-white focus:outline-none transition-all" required>
                <input type="tel" id="phone" placeholder="Phone Number" class="w-full px-4 py-3 border-2 border-white/30 bg-black/50 text-white rounded-xl focus:border-white focus:outline-none transition-all">
              </div>
            </div>

            <div>
              <h2 class="text-2xl font-bold text-white mb-6">üìö Academic Information</h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <select id="grade" class="w-full px-4 py-3 border-2 border-white/30 bg-black/50 text-white rounded-xl focus:border-white focus:outline-none transition-all" required>
                  <option value="">Select your grade</option>
                  <option value="K">Kindergarten</option>
                  <option value="1">1st Grade</option>
                  <option value="2">2nd Grade</option>
                  <option value="3">3rd Grade</option>
                  <option value="4">4th Grade</option>
                  <option value="5">5th Grade</option>
                </select>
                <select id="course" class="w-full px-4 py-3 border-2 border-white/30 bg-black/50 text-white rounded-xl focus:border-white focus:outline-none transition-all" required>
                  <option value="">Select favorite subject</option>
                  <option value="mathematics">üî¢ Mathematics</option>
                  <option value="science">üî¨ Science</option>
                  <option value="english">üìñ English</option>
                  <option value="social">üåç Social Studies</option>
                  <option value="art">üé® Art</option>
                </select>
              </div>
            </div>

            <div class="flex gap-4 pt-6">
              <button type="submit" class="flex-1 space-btn bg-white/20 text-white font-bold py-4 px-8 rounded-xl">
                Launch Dashboard üöÄ
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- QUIZ SECTION -->
  <section id="quizSection">
    <div class="min-h-screen flex items-center justify-center p-4 relative z-10">
      <div class="w-full max-w-4xl">
        <div class="text-center mb-8">
          <h1 class="text-4xl md:text-5xl font-bold neon-text mb-2" style="font-family: 'Orbitron', sans-serif;">
            üß† Personality Discovery
          </h1>
          <p class="neon-cyan text-xl">Answer authentically to unlock your learning DNA</p>
        </div>

        <div class="mb-8">
          <div class="flex justify-between text-white text-sm mb-3 font-medium">
            <span>Progress</span>
            <span id="quizProgress">1 / 10</span>
          </div>
          <div class="w-full bg-black rounded-full h-3 overflow-hidden border border-white/30">
            <div id="quizProgressBar" class="h-full bg-gradient-to-r from-white to-gray-400 transition-all duration-500 rounded-full" style="width: 10%; box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);"></div>
          </div>
        </div>

        <div id="quizCard" class="glass-card rounded-2xl p-8 border-2 border-white/50 shadow-2xl">
          <h2 id="quizQuestion" class="text-2xl font-semibold mb-6 text-white"></h2>
          <div id="quizOptions" class="space-y-4 mb-8"></div>
          
          <div class="flex justify-between items-center">
            <button id="prevQuizBtn" class="px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-semibold transition-all duration-300 disabled:opacity-30 disabled:cursor-not-allowed border border-white/30">
              ‚Üê Previous
            </button>
            <button id="nextQuizBtn" class="space-btn bg-white/20 text-white px-8 py-3 rounded-lg font-semibold">
              Next ‚Üí
            </button>
            <button id="submitQuizBtn" class="hidden space-btn bg-gradient-to-r from-green-500/30 to-emerald-600/30 text-green-300 px-8 py-3 rounded-lg font-semibold border-green-400">
              Complete üéØ
            </button>
          </div>
        </div>

        <div id="quizLoading" class="hidden glass-card rounded-2xl p-12 text-center">
          <div class="loader mx-auto mb-6"></div>
          <h2 class="text-3xl font-bold text-white mb-4">Analyzing Your Profile...</h2>
          <p class="neon-cyan text-lg mb-6">Decoding your unique learning signature</p>
          <div class="w-full bg-black rounded-full h-3 overflow-hidden border border-white/30">
            <div id="analysisProgress" class="h-full bg-gradient-to-r from-white to-purple-500 rounded-full transition-all duration-1000" style="width: 0%; box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);"></div>
          </div>
          <p id="loadingText" class="neon-pink font-semibold mt-4"></p>
        </div>
      </div>
    </div>
  </section>

  <!-- DASHBOARD SECTION -->
  <section id="dashboardSection">
    <div class="min-h-screen p-4 md:p-8 relative z-10">
      <div class="max-w-7xl mx-auto mb-8">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h1 class="text-4xl font-bold text-white mb-2">Welcome, <span id="dashboardName" class="neon-text">Explorer</span>! üëã</h1>
            <p class="neon-cyan text-lg">Your Learning DNA: <span id="dashboardPersonality" class="neon-pink font-semibold"></span></p>
          </div>
        </div>
      </div>

      <div class="max-w-7xl mx-auto mb-8">
        <h2 class="text-3xl font-bold text-white mb-6 text-center">üéÆ Choose Your Learning Quest</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          
          <div class="game-card rounded-2xl p-6 text-center" onclick="startMathGame()">
            <div class="text-6xl mb-4">üî¢</div>
            <h3 class="text-2xl font-bold neon-text mb-3">Math Universe</h3>
            <p class="text-white mb-4">Conquer numerical challenges!</p>
            <div class="text-white font-bold">‚≠ê Level <span id="mathLevel">1</span> / 10</div>
          </div>

          <div class="game-card rounded-2xl p-6 text-center" onclick="startScienceGame()">
            <div class="text-6xl mb-4">üî¨</div>
            <h3 class="text-2xl font-bold neon-pink mb-3">Science Realm</h3>
            <p class="text-white mb-4">Unlock scientific mysteries!</p>
            <div class="text-white font-bold">‚≠ê Level <span id="scienceLevel">1</span> / 10</div>
          </div>

          <div class="game-card rounded-2xl p-6 text-center" onclick="startEnglishGame()">
            <div class="text-6xl mb-4">üìö</div>
            <h3 class="text-2xl font-bold neon-cyan mb-3">Language Odyssey</h3>
            <p class="text-white mb-4">Master linguistic mastery!</p>
            <div class="text-white font-bold">‚≠ê Level <span id="englishLevel">1</span> / 10</div>
          </div>
        </div>
      </div>

      <div class="max-w-7xl mx-auto grid grid-cols-2 md:grid-cols-4 gap-6">
        <div class="glass-card rounded-2xl p-6 text-center">
          <div class="text-5xl mb-2">‚ö°</div>
          <div class="text-3xl font-bold neon-text" id="totalXP">0</div>
          <div class="neon-cyan text-sm mt-2">Total XP</div>
        </div>
        
        <div class="glass-card rounded-2xl p-6 text-center">
          <div class="text-5xl mb-2">üî•</div>
          <div class="text-3xl font-bold text-orange-400" id="dayStreak">0</div>
          <div class="neon-cyan text-sm mt-2">Day Streak</div>
        </div>
        
        <div class="glass-card rounded-2xl p-6 text-center">
          <div class="text-5xl mb-2">üèÜ</div>
          <div class="text-3xl font-bold text-white"><span id="badgesEarned">0</span> / 29</div>
          <div class="neon-cyan text-sm mt-2">Badges</div>
        </div>
        
        <div class="glass-card rounded-2xl p-6 text-center">
          <div class="text-5xl mb-2">‚≠ê</div>
          <div class="text-3xl font-bold text-purple-400" id="globalRank">-</div>
          <div class="neon-cyan text-sm mt-2">Global Rank</div>
        </div>
      </div>
    </div>
  </section>

  <!-- GAME SECTION -->
  <section id="gameSection">
    <div class="min-h-screen flex items-center justify-center p-4 relative z-10">
      <div class="w-full max-w-3xl">
        <div class="glass-card rounded-3xl p-8">
          <div class="flex justify-between items-center mb-6">
            <div>
              <h2 id="gameTitle" class="text-3xl font-bold neon-text"></h2>
              <p class="text-white text-sm mt-1">Level <span id="currentLevel">1</span> / 10</p>
            </div>
            <button onclick="backToDashboard()" class="space-btn bg-red-500/20 text-red-300 px-4 py-2 rounded-lg border-red-400">
              ‚Üê Exit
            </button>
          </div>

          <div id="gameContent" class="text-center">
            <div class="text-6xl mb-6" id="gameEmoji"></div>
            <h3 id="gameQuestion" class="text-2xl text-white font-bold mb-8"></h3>
            <div id="gameOptions" class="grid grid-cols-2 gap-4 mb-6"></div>
            <div id="gameResult" class="hidden text-2xl font-bold mb-4"></div>
            <div class="flex justify-between items-center mt-8">
              <div class="neon-cyan">
                Score: <span id="gameScore" class="neon-text font-bold text-2xl">0</span>
              </div>
              <button id="nextGameBtn" class="space-btn bg-white/20 text-white px-6 py-3 rounded-lg font-bold">
                Next Question ‚Üí
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TILE JUMP GAME SECTION -->
  <section id="tileGameSection">
    <div class="min-h-screen flex items-center justify-center p-4 relative z-10">
      <div class="w-full max-w-4xl">
        <div class="glass-card rounded-3xl p-8">
          <div class="flex justify-between items-center mb-6">
            <div>
              <h2 id="tileGameTitle" class="text-3xl font-bold neon-text">üèÉ Path Master</h2>
              <p class="text-white text-sm mt-1">Level <span id="tileCurrentLevel">1</span> / 10</p>
            </div>
            <button onclick="backToDashboard()" class="space-btn bg-red-500/20 text-red-300 px-4 py-2 rounded-lg border-red-400">
              ‚Üê Exit
            </button>
          </div>

          <div class="text-center mb-8">
            <h3 id="tileQuestion" class="text-3xl font-bold neon-pink mb-4"></h3>
            <p class="text-white text-lg">Jump to the correct tile to reach home! üè†</p>
          </div>

          <div id="tileGameContent" class="tile-game-container">
            <div id="characterPosition" class="relative" style="height: 100px;">
              <div class="character" id="gameCharacter"></div>
            </div>
            
            <div class="tile-row" id="tileRow"></div>
            
            <div class="tile-row">
              <div class="tile home-tile" style="width: 500px;"></div>
            </div>
          </div>

          <div class="flex justify-between items-center mt-8">
            <div class="neon-cyan">
              Score: <span id="tileGameScore" class="neon-text font-bold text-2xl">0</span>
            </div>
            <button id="nextTileBtn" class="hidden space-btn bg-white/20 text-white px-6 py-3 rounded-lg font-bold">
              Next Challenge ‚Üí
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- AI Chatbot Button -->
  <div id="ai-agent-btn" title="Click to chat with AI Assistant">
    <img src="https://cdn-icons-png.flaticon.com/512/4712/4712027.png" alt="AI Agent">
  </div>

  <!-- AI Chatbox -->
  <div id="chatbox" class="chat-container hidden">
    <div class="chat-header">
      <h2>AI Learning Assistant</h2>
      <span id="close-chat">‚úñ</span>
    </div>

    <div class="subject-menu">
      <button onclick="switchSubject('math')">Math</button>
      <button onclick="switchSubject('science')">Science</button>
      <button onclick="switchSubject('wordNebula')">Word Nebula</button>
    </div>

    <div id="chat-window" class="chat-window"></div>
    <div id="typing-indicator" class="typing-indicator hidden">AI is typing...</div>

    <div class="chat-input-container">
      <input type="text" id="user-input" placeholder="Type your answer...">
      <button id="send-btn">Send</button>
    </div>
  </div>

  <script>
    let currentQuizQuestion = 0;
    let quizAnswers = {};
    let userName = '';
    let userPersonality = {};
    let userGrade = '';
    let gameScore = 0;
    let currentGameType = '';
    let currentGameQuestion = 0;
    let currentLevel = 1;
    
    let userStats = {
      totalXP: 0,
      dayStreak: 0,
      badgesEarned: 0,
      globalRank: '-',
      mathLevel: 1,
      scienceLevel: 1,
      englishLevel: 1
    };

    // AI Chatbot Variables
    let currentSubject = "";
    let questions = [];
    let currentQuestionIndex = 0;
    let chatScore = 0;

    // Questions data for AI chatbot
    const chatbotQuestions = {
      "math": [
        {"question": "What is 2 + 2?", "answer": "4"},
        {"question": "What is 5 * 6?", "answer": "30"},
        {"question": "What is 10 - 3?", "answer": "7"},
        {"question": "What is 15 / 3?", "answer": "5"}
      ],
      "science": [
        {"question": "Which gas do humans breathe?", "answer": "oxygen"},
        {"question": "Which planet is known as Red Planet?", "answer": "mars"},
        {"question": "What is H2O?", "answer": "water"},
        {"question": "What is the center of our solar system?", "answer": "sun"}
      ],
      "wordNebula": [
        {"question": "I am always hungry, I must always be fed. What am I?", "answer": "fire"},
        {"question": "I speak without a mouth and hear without ears. What am I?", "answer": "echo"},
        {"question": "What has keys but no locks?", "answer": "keyboard"},
        {"question": "What gets wet while drying?", "answer": "towel"}
      ]
    };

    function createStars() {
      const starsContainer = document.getElementById('stars');
      for (let i = 0; i < 150; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.width = Math.random() * 3 + 'px';
        star.style.height = star.style.width;
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.animationDelay = Math.random() * 3 + 's';
        starsContainer.appendChild(star);
      }
    }

    function showModal(emoji, title, message) {
      document.getElementById('modalEmoji').textContent = emoji;
      document.getElementById('modalTitle').textContent = title;
      document.getElementById('modalMessage').textContent = message;
      document.getElementById('customModal').classList.add('show');
    }

    function closeModal() {
      document.getElementById('customModal').classList.remove('show');
    }

    const quizData = [
      {
        question: "When you get a tough problem, what's your first reaction?",
        options: [
          { text: "Break it into steps üß©", value: "A" },
          { text: "Imagine real-life examples üé®", value: "B" },
          { text: "Try random ideas and see what works üß≠", value: "C" },
          { text: "Compete to solve it fastest ‚ö°", value: "D" },
          { text: "Ask a friend for help ü§ù", value: "E" }
        ]
      },
      {
        question: "What kind of classroom do you enjoy most?",
        options: [
          { text: "Quiet and logical", value: "A" },
          { text: "Creative and messy", value: "B" },
          { text: "Exploratory and free", value: "C" },
          { text: "Fast-paced and challenging", value: "D" },
          { text: "Friendly and team-based", value: "E" }
        ]
      },
      {
        question: "How do you remember things best?",
        options: [
          { text: "Repeating formulas/patterns", value: "A" },
          { text: "Drawing or visualizing", value: "B" },
          { text: "Trying experiments", value: "C" },
          { text: "Competing with myself or others", value: "D" },
          { text: "Teaching someone else", value: "E" }
        ]
      },
      {
        question: "If you were in a group project, what role would you take?",
        options: [
          { text: "Organizer", value: "A" },
          { text: "Idea generator", value: "B" },
          { text: "Explorer who finds resources", value: "C" },
          { text: "Leader pushing the pace", value: "D" },
          { text: "Peacemaker & motivator", value: "E" }
        ]
      },
      {
        question: "How do you react when you fail a test?",
        options: [
          { text: "Analyze where I went wrong", value: "A" },
          { text: "Draw or brainstorm new approach", value: "B" },
          { text: "Try different methods", value: "C" },
          { text: "Double my efforts to win next time", value: "D" },
          { text: "Talk with others for support", value: "E" }
        ]
      },
      {
        question: "Which of these games would you enjoy most?",
        options: [
          { text: "Puzzle or Sudoku", value: "A" },
          { text: "Minecraft or art games", value: "B" },
          { text: "Adventure exploration games", value: "C" },
          { text: "Competitive eSports", value: "D" },
          { text: "Co-op team games", value: "E" }
        ]
      },
      {
        question: "What motivates you to learn?",
        options: [
          { text: "Logic and clarity", value: "A" },
          { text: "Creativity and imagination", value: "B" },
          { text: "Discovery and curiosity", value: "C" },
          { text: "Achievement and recognition", value: "D" },
          { text: "Collaboration and sharing", value: "E" }
        ]
      },
      {
        question: "You're given a new topic ‚Äì what's your approach?",
        options: [
          { text: "Study structure first", value: "A" },
          { text: "Make a mind map", value: "B" },
          { text: "Jump in and explore", value: "C" },
          { text: "Look at top scorers' methods", value: "D" },
          { text: "Discuss with group", value: "E" }
        ]
      },
      {
        question: "Which tool helps you most while learning?",
        options: [
          { text: "Notes and flowcharts", value: "A" },
          { text: "Drawing or storyboards", value: "B" },
          { text: "Interactive experiments", value: "C" },
          { text: "Quizzes and leaderboards", value: "D" },
          { text: "Study groups", value: "E" }
        ]
      },
      {
        question: "How do you define success in studies?",
        options: [
          { text: "Understanding concepts deeply", value: "A" },
          { text: "Creating something new", value: "B" },
          { text: "Learning something unexpected", value: "C" },
          { text: "Scoring highest marks", value: "D" },
          { text: "Helping others learn", value: "E" }
        ]
      }
    ];

    const personalityProfiles = {
      A: { 
        title: "The Analyst", 
        emoji: "üß©", 
        message: "Logical, detail-focused, loves patterns and problem-solving!"
      },
      B: { 
        title: "The Creator", 
        emoji: "üé®", 
        message: "Imaginative, learns by building and experimenting!"
      },
      C: { 
        title: "The Explorer", 
        emoji: "üß≠", 
        message: "Curious, adventurous, tries new approaches!"
      },
      D: { 
        title: "The Challenger", 
        emoji: "‚ö°", 
        message: "Competitive, goal-driven, thrives under challenge!"
      },
      E: { 
        title: "The Supporter", 
        emoji: "ü§ù", 
        message: "Collaborative, empathetic, learns best with teamwork!"
      }
    };

    const gameQuestions = {
      math: {
        K: [
          { q: "What do plants need to grow?", options: ["Water", "Toys", "Books", "Shoes"], answer: "Water", emoji: "üå±", isTileGame: true },
          { q: "Which animal says 'Moo'?", options: ["Dog", "Cat", "Cow", "Bird"], answer: "Cow", emoji: "üêÑ" },
          { q: "What color is the sky?", options: ["Red", "Blue", "Green", "Yellow"], answer: "Blue", emoji: "‚òÅÔ∏è", isTileGame: true },
          { q: "What gives us light at night?", options: ["Sun", "Moon", "Car", "Tree"], answer: "Moon", emoji: "üåô" },
          { q: "Which animal can fly?", options: ["Dog", "Bird", "Fish", "Cat"], answer: "Bird", emoji: "ü¶Ö", isTileGame: true },
          { q: "Where do fish live?", options: ["Tree", "Sky", "Water", "House"], answer: "Water", emoji: "üêü" },
          { q: "What season is hot?", options: ["Winter", "Summer", "Rain", "Snow"], answer: "Summer", emoji: "‚òÄÔ∏è", isTileGame: true },
          { q: "What helps us see?", options: ["Ears", "Nose", "Eyes", "Mouth"], answer: "Eyes", emoji: "üëÅÔ∏è" },
          { q: "Which is a fruit?", options: ["Carrot", "Apple", "Potato", "Bread"], answer: "Apple", emoji: "üçé", isTileGame: true },
          { q: "What makes sound 'Woof'?", options: ["Cat", "Dog", "Cow", "Bird"], answer: "Dog", emoji: "üêï" }
        ],
        "1": [
          { q: "What do bees make?", options: ["Milk", "Honey", "Bread", "Water"], answer: "Honey", emoji: "üêù", isTileGame: true },
          { q: "Which planet do we live on?", options: ["Mars", "Venus", "Earth", "Jupiter"], answer: "Earth", emoji: "üåç" },
          { q: "What season comes after winter?", options: ["Fall", "Summer", "Spring", "Winter"], answer: "Spring", emoji: "üå∏", isTileGame: true },
          { q: "What gives us light in day?", options: ["Moon", "Stars", "Sun", "Lamp"], answer: "Sun", emoji: "‚òÄÔ∏è" },
          { q: "What do caterpillars become?", options: ["Birds", "Butterflies", "Bees", "Ants"], answer: "Butterflies", emoji: "ü¶ã", isTileGame: true },
          { q: "What is frozen water called?", options: ["Steam", "Ice", "Rain", "Cloud"], answer: "Ice", emoji: "üßä" },
          { q: "Which animal has a trunk?", options: ["Lion", "Elephant", "Tiger", "Bear"], answer: "Elephant", emoji: "üêò", isTileGame: true },
          { q: "What do we breathe?", options: ["Water", "Food", "Air", "Fire"], answer: "Air", emoji: "üí®" },
          { q: "What color are leaves?", options: ["Red", "Blue", "Green", "Yellow"], answer: "Green", emoji: "üçÉ", isTileGame: true },
          { q: "What pulls things down?", options: ["Wind", "Gravity", "Light", "Sound"], answer: "Gravity", emoji: "‚¨áÔ∏è" }
        ],
        "2": [
          { q: "How many legs does a spider have?", options: ["6", "8", "10", "12"], answer: "8", emoji: "üï∑Ô∏è", isTileGame: true },
          { q: "What makes plants green?", options: ["Water", "Chlorophyll", "Sunlight", "Soil"], answer: "Chlorophyll", emoji: "üåø" },
          { q: "What is H2O?", options: ["Air", "Water", "Fire", "Earth"], answer: "Water", emoji: "üíß", isTileGame: true },
          { q: "What is the hardest natural substance?", options: ["Gold", "Iron", "Diamond", "Silver"], answer: "Diamond", emoji: "üíé" },
          { q: "What do tadpoles grow into?", options: ["Fish", "Frogs", "Birds", "Snakes"], answer: "Frogs", emoji: "üê∏", isTileGame: true },
          { q: "What is Earth's satellite?", options: ["Sun", "Mars", "Moon", "Star"], answer: "Moon", emoji: "üåô" },
          { q: "Which organ pumps blood?", options: ["Brain", "Heart", "Lungs", "Liver"], answer: "Heart", emoji: "‚ù§Ô∏è", isTileGame: true },
          { q: "What do bees collect from flowers?", options: ["Water", "Nectar", "Leaves", "Seeds"], answer: "Nectar", emoji: "üå∫" },
          { q: "What are baby cats called?", options: ["Puppies", "Kittens", "Cubs", "Chicks"], answer: "Kittens", emoji: "üê±", isTileGame: true },
          { q: "What gas do plants produce?", options: ["Nitrogen", "Oxygen", "Hydrogen", "Carbon"], answer: "Oxygen", emoji: "üå≥" }
        ],
        "3": [
          { q: "What is the center of our solar system?", options: ["Moon", "Earth", "Sun", "Mars"], answer: "Sun", emoji: "‚òÄÔ∏è", isTileGame: true },
          { q: "What do you call a baby frog?", options: ["Puppy", "Kitten", "Tadpole", "Calf"], answer: "Tadpole", emoji: "üê∏" },
          { q: "What type of animal is a dolphin?", options: ["Fish", "Mammal", "Reptile", "Bird"], answer: "Mammal", emoji: "üê¨", isTileGame: true },
          { q: "What causes rain?", options: ["Wind", "Clouds", "Sun", "Moon"], answer: "Clouds", emoji: "üåßÔ∏è" },
          { q: "What is the largest ocean?", options: ["Atlantic", "Indian", "Pacific", "Arctic"], answer: "Pacific", emoji: "üåä", isTileGame: true },
          { q: "What is the boiling point of water?", options: ["50¬∞C", "75¬∞C", "100¬∞C", "150¬∞C"], answer: "100¬∞C", emoji: "‚ô®Ô∏è" },
          { q: "Which is NOT a state of matter?", options: ["Solid", "Liquid", "Gas", "Energy"], answer: "Energy", emoji: "‚ö°", isTileGame: true },
          { q: "What do herbivores eat?", options: ["Meat", "Plants", "Both", "Nothing"], answer: "Plants", emoji: "üåø" },
          { q: "What is Earth's atmosphere made of?", options: ["Water", "Nitrogen", "Carbon", "Helium"], answer: "Nitrogen", emoji: "üí®", isTileGame: true },
          { q: "What is the fastest land animal?", options: ["Lion", "Cheetah", "Elephant", "Horse"], answer: "Cheetah", emoji: "üêÜ" }
        ],
        "4": [
          { q: "What is photosynthesis?", options: ["Plant breathing", "Plant eating", "Plant making food", "Plant sleeping"], answer: "Plant making food", emoji: "üå≥", isTileGame: true },
          { q: "How many planets are in our solar system?", options: ["7", "8", "9", "10"], answer: "8", emoji: "ü™ê" },
          { q: "What causes day and night?", options: ["Moon rotating", "Earth rotating", "Sun rotating", "Stars moving"], answer: "Earth rotating", emoji: "üåç", isTileGame: true },
          { q: "What is the smallest bone in human body?", options: ["In ear", "In finger", "In toe", "In nose"], answer: "In ear", emoji: "üëÇ" },
          { q: "What is the chemical symbol for gold?", options: ["Go", "Gd", "Au", "Ag"], answer: "Au", emoji: "üèÜ", isTileGame: true },
          { q: "How many teeth do adults have?", options: ["28", "30", "32", "34"], answer: "32", emoji: "ü¶∑" },
          { q: "What is the largest mammal?", options: ["Elephant", "Blue Whale", "Giraffe", "Rhino"], answer: "Blue Whale", emoji: "üêã", isTileGame: true },
          { q: "What is the speed of light?", options: ["200k km/s", "300k km/s", "400k km/s", "500k km/s"], answer: "300k km/s", emoji: "üí°" },
          { q: "What is Earth's core made of?", options: ["Rock", "Water", "Iron", "Gas"], answer: "Iron", emoji: "üåç", isTileGame: true },
          { q: "How long does Earth take to orbit Sun?", options: ["30 days", "100 days", "365 days", "500 days"], answer: "365 days", emoji: "üåû" }
        ],
        "5": [
          { q: "What is the closest star to Earth?", options: ["Polaris", "Sirius", "Sun", "Alpha Centauri"], answer: "Sun", emoji: "‚≠ê", isTileGame: true },
          { q: "What is evaporation?", options: ["Water freezing", "Water turning to gas", "Water falling", "Water flowing"], answer: "Water turning to gas", emoji: "üí®" },
          { q: "Which force pulls objects to Earth?", options: ["Magnetism", "Friction", "Gravity", "Electricity"], answer: "Gravity", emoji: "üåé", isTileGame: true },
          { q: "What is the powerhouse of cell?", options: ["Nucleus", "Mitochondria", "Ribosome", "Membrane"], answer: "Mitochondria", emoji: "üî¨" },
          { q: "What is the study of weather called?", options: ["Geology", "Biology", "Meteorology", "Astronomy"], answer: "Meteorology", emoji: "üå¶Ô∏è", isTileGame: true },
          { q: "What is the chemical formula for water?", options: ["H2O", "CO2", "O2", "HO2"], answer: "H2O", emoji: "üíß" },
          { q: "Which planet is known as Red Planet?", options: ["Venus", "Mars", "Jupiter", "Saturn"], answer: "Mars", emoji: "üî¥", isTileGame: true },
          { q: "What is the pH of pure water?", options: ["5", "6", "7", "8"], answer: "7", emoji: "üß™" },
          { q: "What is the largest organ in human body?", options: ["Heart", "Brain", "Skin", "Liver"], answer: "Skin", emoji: "ü§ö", isTileGame: true },
          { q: "What galaxy is Earth in?", options: ["Andromeda", "Milky Way", "Sombrero", "Whirlpool"], answer: "Milky Way", emoji: "üåå" }
        ]
      },
      english: {
        K: [
          { q: "What letter comes after A?", options: ["C", "B", "D", "E"], answer: "B", emoji: "üî§", isTileGame: true },
          { q: "Which word rhymes with 'cat'?", options: ["Dog", "Hat", "Sun", "Car"], answer: "Hat", emoji: "üé©" },
          { q: "How many letters in 'dog'?", options: ["2", "3", "4", "5"], answer: "3", emoji: "üêï", isTileGame: true },
          { q: "What is the first letter of 'apple'?", options: ["B", "A", "C", "D"], answer: "A", emoji: "üçé" },
          { q: "Which is a vowel?", options: ["B", "C", "E", "F"], answer: "E", emoji: "üìù", isTileGame: true },
          { q: "What sound does 'B' make?", options: ["Buh", "Cuh", "Duh", "Fuh"], answer: "Buh", emoji: "üîä" },
          { q: "Which is uppercase?", options: ["a", "b", "C", "d"], answer: "C", emoji: "üî†", isTileGame: true },
          { q: "What rhymes with 'sun'?", options: ["Moon", "Run", "Star", "Sky"], answer: "Run", emoji: "‚òÄÔ∏è" },
          { q: "First letter of 'book'?", options: ["A", "B", "C", "D"], answer: "B", emoji: "üìö", isTileGame: true },
          { q: "How many vowels in 'cat'?", options: ["0", "1", "2", "3"], answer: "1", emoji: "üê±" }
        ],
        "1": [
          { q: "Which is a noun?", options: ["Run", "Jump", "Book", "Happy"], answer: "Book", emoji: "üìö", isTileGame: true },
          { q: "What is the opposite of 'hot'?", options: ["Warm", "Cold", "Cool", "Fire"], answer: "Cold", emoji: "‚ùÑÔ∏è" },
          { q: "How many vowels are there?", options: ["3", "4", "5", "6"], answer: "5", emoji: "üî§", isTileGame: true },
          { q: "Which word is a color?", options: ["Fast", "Blue", "Happy", "Jump"], answer: "Blue", emoji: "üé®" },
          { q: "What is plural of 'cat'?", options: ["Cat", "Cats", "Cates", "Caties"], answer: "Cats", emoji: "üê±", isTileGame: true },
          { q: "Which is an adjective?", options: ["Run", "Happy", "Book", "Jump"], answer: "Happy", emoji: "üòä" },
          { q: "Opposite of 'big'?", options: ["Large", "Huge", "Small", "Tall"], answer: "Small", emoji: "üìè", isTileGame: true },
          { q: "Which word rhymes with 'tree'?", options: ["Tea", "Bee", "Ant", "Dog"], answer: "Bee", emoji: "üå≥" },
          { q: "What is a baby dog called?", options: ["Kitten", "Puppy", "Calf", "Chick"], answer: "Puppy", emoji: "üê∂", isTileGame: true },
          { q: "Which is a verb?", options: ["Cat", "Blue", "Jump", "Happy"], answer: "Jump", emoji: "üèÉ" }
        ],
        "2": [
          { q: "Which is a verb?", options: ["Cat", "Blue", "Run", "Happy"], answer: "Run", emoji: "üèÉ", isTileGame: true },
          { q: "What is a synonym for 'big'?", options: ["Small", "Large", "Tiny", "Little"], answer: "Large", emoji: "üìè" },
          { q: "Which word is spelled correctly?", options: ["Freind", "Friend", "Frend", "Friand"], answer: "Friend", emoji: "üë´", isTileGame: true },
          { q: "What is plural of 'mouse'?", options: ["Mouses", "Mice", "Mices", "Mouse"], answer: "Mice", emoji: "üê≠" },
          { q: "Which is a compound word?", options: ["Run", "Sunshine", "Happy", "Blue"], answer: "Sunshine", emoji: "‚òÄÔ∏è", isTileGame: true },
          { q: "Opposite of 'happy'?", options: ["Sad", "Glad", "Joyful", "Cheerful"], answer: "Sad", emoji: "üò¢" },
          { q: "Which shows possession?", options: ["Dogs", "Dog's", "Dogs'", "Dog"], answer: "Dog's", emoji: "üêï", isTileGame: true },
          { q: "What is an antonym for 'fast'?", options: ["Quick", "Rapid", "Slow", "Swift"], answer: "Slow", emoji: "üêå" },
          { q: "Which is a proper noun?", options: ["city", "John", "dog", "book"], answer: "John", emoji: "üë§", isTileGame: true },
          { q: "What is past tense of 'run'?", options: ["Runned", "Ran", "Running", "Runs"], answer: "Ran", emoji: "üèÉ" }
        ],
        "3": [
          { q: "What is an adjective?", options: ["Action word", "Describing word", "Person/place", "Connecting word"], answer: "Describing word", emoji: "‚ú®", isTileGame: true },
          { q: "Which sentence is correct?", options: ["He go to school", "He goes to school", "He going school", "He gone school"], answer: "He goes to school", emoji: "‚úÖ" },
          { q: "What is a compound word?", options: ["Big word", "Two words together", "Foreign word", "Rhyming word"], answer: "Two words together", emoji: "üîó", isTileGame: true },
          { q: "Which is a preposition?", options: ["Run", "Under", "Happy", "Book"], answer: "Under", emoji: "üìç" },
          { q: "What is a homophone of 'two'?", options: ["Three", "Too", "One", "Four"], answer: "Too", emoji: "2Ô∏è‚É£", isTileGame: true },
          { q: "Which is a conjunction?", options: ["Run", "And", "Happy", "Blue"], answer: "And", emoji: "‚ûï" },
          { q: "What is plural of 'foot'?", options: ["Foots", "Feets", "Feet", "Footes"], answer: "Feet", emoji: "üë£", isTileGame: true },
          { q: "Which is an adverb?", options: ["Quick", "Quickly", "Quickness", "Quicker"], answer: "Quickly", emoji: "‚ö°" },
          { q: "What is a synonym for 'happy'?", options: ["Sad", "Angry", "Joyful", "Tired"], answer: "Joyful", emoji: "üòä", isTileGame: true },
          { q: "Which is a contraction?", options: ["Cannot", "Can not", "Can't", "Cant"], answer: "Can't", emoji: "üö´" }
        ],
        "4": [
          { q: "What is a metaphor?", options: ["Comparison with 'like'", "Direct comparison", "Sound word", "Exaggeration"], answer: "Direct comparison", emoji: "üé≠", isTileGame: true },
          { q: "Which is a pronoun?", options: ["Book", "Run", "She", "Blue"], answer: "She", emoji: "üë§" },
          { q: "What's the plural of 'child'?", options: ["Childs", "Children", "Childes", "Childrens"], answer: "Children", emoji: "üë∂", isTileGame: true },
          { q: "What is a simile?", options: ["Direct comparison", "Using 'like' or 'as'", "Exaggeration", "Sound word"], answer: "Using 'like' or 'as'", emoji: "üîÑ" },
          { q: "Which is correct?", options: ["Their going", "There going", "They're going", "Thier going"], answer: "They're going", emoji: "‚úÖ", isTileGame: true },
          { q: "What is an idiom?", options: ["Literal phrase", "Figurative phrase", "Question", "Statement"], answer: "Figurative phrase", emoji: "üí≠" },
          { q: "Which is a collective noun?", options: ["Dog", "Team", "Run", "Happy"], answer: "Team", emoji: "üë•", isTileGame: true },
          { q: "What is onomatopoeia?", options: ["Rhyming", "Sound words", "Repetition", "Comparison"], answer: "Sound words", emoji: "üí•" },
          { q: "Which is passive voice?", options: ["I ate pizza", "Pizza was eaten", "Eating pizza", "Pizza eats"], answer: "Pizza was eaten", emoji: "üçï", isTileGame: true },
          { q: "What is a prefix?", options: ["End of word", "Start of word", "Middle of word", "Whole word"], answer: "Start of word", emoji: "üî§" }
        ],
        "5": [
          { q: "What is alliteration?", options: ["Rhyming words", "Repeated sounds", "Opposite meanings", "Similar meanings"], answer: "Repeated sounds", emoji: "üéµ", isTileGame: true },
          { q: "Which is a complex sentence?", options: ["I ran.", "I ran fast.", "When I ran, I fell.", "Run fast!"], answer: "When I ran, I fell.", emoji: "üìù" },
          { q: "What does 'biography' mean?", options: ["Life story", "Science book", "Poem collection", "Fiction novel"], answer: "Life story", emoji: "üìñ", isTileGame: true },
          { q: "What is personification?", options: ["Human qualities to objects", "Animal story", "Exaggeration", "Comparison"], answer: "Human qualities to objects", emoji: "üé≠" },
          { q: "Which is a thesis statement?", options: ["Question", "Main argument", "Example", "Quote"], answer: "Main argument", emoji: "üí°", isTileGame: true },
          { q: "What is hyperbole?", options: ["Understatement", "Exaggeration", "Comparison", "Sound"], answer: "Exaggeration", emoji: "üì¢" },
          { q: "Which is subjunctive mood?", options: ["I am happy", "If I were rich", "I was there", "I will go"], answer: "If I were rich", emoji: "ü§î", isTileGame: true },
          { q: "What is an analogy?", options: ["Rhyme", "Comparison", "Question", "Sound"], answer: "Comparison", emoji: "üîÑ" },
          { q: "Which is correct comma use?", options: ["Yes I agree", "Yes, I agree", "Yes I, agree", "Yes I agree,"], answer: "Yes, I agree", emoji: "‚úÖ", isTileGame: true },
          { q: "What is a gerund?", options: ["Verb as noun", "Verb as adjective", "Noun as verb", "Adjective as verb"], answer: "Verb as noun", emoji: "üìö" }
        ]
      }
    };

    function showSection(sectionId) {
      document.querySelectorAll('section').forEach(section => {
        section.classList.remove('active');
      });
      
      const targetSection = document.getElementById(sectionId);
      targetSection.classList.add('active');
      
      gsap.fromTo(targetSection, 
        { opacity: 0, y: 50 },
        { opacity: 1, y: 0, duration: 0.8, ease: "power3.out" }
      );
    }

    function goToAbout() {
      showSection('aboutSection');
      gsap.fromTo('#aboutText',
        { opacity: 0, y: 30 },
        { opacity: 1, y: 0, duration: 1, delay: 0.5 }
      );
    }

    function goToInteractive() {
      showSection('interactiveSection');
    }

    function goToLogin() {
      showSection('loginSection');
    }

    document.getElementById('loginBtn').addEventListener('click', function() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      if (!email || !password) {
        showModal('‚ö†Ô∏è', 'Incomplete Information', 'Please enter both email and password to continue your journey!');
        return;
      }
      
      gsap.to(this, { scale: 0.95, duration: 0.1, yoyo: true, repeat: 1 });
      
      setTimeout(() => {
        showSection('profileSection');
      }, 300);
    });

    const today = new Date().toISOString().split('T')[0];
    document.getElementById('dob').setAttribute('max', today);

    document.getElementById('profileForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      userName = document.getElementById('fullName').value;
      userGrade = document.getElementById('grade').value;
      
      if (!userName || !userGrade) {
        showModal('‚ö†Ô∏è', 'Incomplete Profile', 'Please fill in all required fields to continue!');
        return;
      }
      
      setTimeout(() => {
        showSection('quizSection');
        loadQuizQuestion();
      }, 500);
    });

    function loadQuizQuestion() {
      const question = quizData[currentQuizQuestion];
      const questionEl = document.getElementById('quizQuestion');
      const optionsEl = document.getElementById('quizOptions');
      
      questionEl.textContent = `${currentQuizQuestion + 1}. ${question.question}`;
      
      optionsEl.innerHTML = '';
      question.options.forEach((option, index) => {
        const optionDiv = document.createElement('div');
        optionDiv.className = 'option-card rounded-lg p-4 cursor-pointer';
        optionDiv.innerHTML = `
          <label class="flex items-center cursor-pointer">
            <input type="radio" name="quizAnswer" value="${option.value}" class="mr-4 w-5 h-5 accent-white" ${quizAnswers[currentQuizQuestion] === option.value ? 'checked' : ''}>
            <span class="text-lg text-white">${option.text}</span>
          </label>
        `;
        
        if (quizAnswers[currentQuizQuestion] === option.value) {
          optionDiv.classList.add('selected');
        }
        
        optionDiv.addEventListener('click', () => {
          document.querySelectorAll('.option-card').forEach(card => card.classList.remove('selected'));
          optionDiv.classList.add('selected');
          const radio = optionDiv.querySelector('input[type="radio"]');
          radio.checked = true;
          quizAnswers[currentQuizQuestion] = option.value;
        });
        
        gsap.fromTo(optionDiv,
          { opacity: 0, x: -30 },
          { opacity: 1, x: 0, duration: 0.4, delay: index * 0.1 }
        );
        
        optionsEl.appendChild(optionDiv);
      });
      
      updateQuizProgress();
      updateQuizButtons();
    }

    function updateQuizProgress() {
      const progress = ((currentQuizQuestion + 1) / quizData.length) * 100;
      document.getElementById('quizProgressBar').style.width = `${progress}%`;
      document.getElementById('quizProgress').textContent = `${currentQuizQuestion + 1} / ${quizData.length}`;
    }

    function updateQuizButtons() {
      const prevBtn = document.getElementById('prevQuizBtn');
      const nextBtn = document.getElementById('nextQuizBtn');
      const submitBtn = document.getElementById('submitQuizBtn');
      
      prevBtn.disabled = currentQuizQuestion === 0;
      
      if (currentQuizQuestion === quizData.length - 1) {
        nextBtn.classList.add('hidden');
        submitBtn.classList.remove('hidden');
      } else {
        nextBtn.classList.remove('hidden');
        submitBtn.classList.add('hidden');
      }
    }

    document.getElementById('prevQuizBtn').addEventListener('click', function() {
      if (currentQuizQuestion > 0) {
        currentQuizQuestion--;
        loadQuizQuestion();
      }
    });

    document.getElementById('nextQuizBtn').addEventListener('click', function() {
      if (!quizAnswers[currentQuizQuestion]) {
        showModal('üéØ', 'Answer Required', 'For personalized learning, you must answer each question! Your response helps us understand you better. ‚ú®');
        return;
      }
      
      if (currentQuizQuestion < quizData.length - 1) {
        currentQuizQuestion++;
        loadQuizQuestion();
      }
    });

    document.getElementById('submitQuizBtn').addEventListener('click', function() {
      if (!quizAnswers[currentQuizQuestion]) {
        showModal('üéØ', 'Answer Required', 'For personalized learning, you must answer each question! Your response helps us understand you better. ‚ú®');
        return;
      }
      
      document.getElementById('quizCard').style.display = 'none';
      document.getElementById('quizLoading').classList.remove('hidden');
      
      const loadingTexts = [
        'Analyzing your cognitive patterns...',
        'Decoding your learning DNA...',
        'Crafting your personalized pathway...',
        'Initializing your dashboard...'
      ];
      
      let textIndex = 0;
      const textInterval = setInterval(() => {
        if (textIndex < loadingTexts.length) {
          document.getElementById('loadingText').textContent = loadingTexts[textIndex];
          textIndex++;
        } else {
          clearInterval(textInterval);
        }
      }, 1500);
      
      gsap.to('#analysisProgress', {
        width: '100%',
        duration: 6,
        ease: 'power1.inOut',
        onComplete: () => {
          calculatePersonality();
          setTimeout(() => {
            populateDashboard();
            showSection('dashboardSection');
            animateDashboard();
            
            // Show AI chatbot button after reaching dashboard
            document.getElementById('ai-agent-btn').classList.add('show');
          }, 500);
        }
      });
    });

    function calculatePersonality() {
      const counts = { A: 0, B: 0, C: 0, D: 0, E: 0 };
      Object.values(quizAnswers).forEach(answer => counts[answer]++);
      
      const max = Math.max(...Object.values(counts));
      const dominant = Object.keys(counts).find(key => counts[key] === max);
      
      userPersonality = {
        type: dominant,
        profile: personalityProfiles[dominant],
        distribution: counts
      };
    }

    function populateDashboard() {
      document.getElementById('dashboardName').textContent = userName;
      document.getElementById('dashboardPersonality').textContent = userPersonality.profile.title;
      
      document.getElementById('totalXP').textContent = userStats.totalXP;
      document.getElementById('dayStreak').textContent = userStats.dayStreak;
      document.getElementById('badgesEarned').textContent = userStats.badgesEarned;
      document.getElementById('globalRank').textContent = userStats.globalRank;
      document.getElementById('mathLevel').textContent = userStats.mathLevel;
      document.getElementById('scienceLevel').textContent = userStats.scienceLevel;
      document.getElementById('englishLevel').textContent = userStats.englishLevel;
    }

    function animateDashboard() {
      gsap.fromTo('.game-card',
        { opacity: 0, y: 30 },
        { opacity: 1, y: 0, duration: 0.6, stagger: 0.15, ease: 'power3.out' }
      );
    }

    function startMathGame() {
      currentGameType = 'math';
      currentGameQuestion = 0;
      gameScore = 0;
      currentLevel = userStats.mathLevel;
      loadGame();
    }

    function startScienceGame() {
      currentGameType = 'science';
      currentGameQuestion = 0;
      gameScore = 0;
      currentLevel = userStats.scienceLevel;
      loadGame();
    }

    function startEnglishGame() {
      currentGameType = 'english';
      currentGameQuestion = 0;
      gameScore = 0;
      currentLevel = userStats.englishLevel;
      loadGame();
    }

    function loadGame() {
      const questions = gameQuestions[currentGameType][userGrade] || gameQuestions[currentGameType]['1'];
      const currentQuestion = questions[currentGameQuestion];
      
      if (currentQuestion && currentQuestion.isTileGame) {
        showSection('tileGameSection');
        loadTileGame();
      } else {
        showSection('gameSection');
        loadStandardGame();
      }
    }

    function loadStandardGame() {
      const titles = {
        math: 'üî¢ Math Universe',
        science: 'üî¨ Science Realm',
        english: 'üìö Language Odyssey'
      };
      
      document.getElementById('gameTitle').textContent = titles[currentGameType];
      document.getElementById('gameScore').textContent = gameScore;
      document.getElementById('currentLevel').textContent = currentLevel;
      
      loadGameQuestion();
    }

    function loadGameQuestion() {
      const questions = gameQuestions[currentGameType][userGrade] || gameQuestions[currentGameType]['1'];
      
      if (currentGameQuestion >= questions.length) {
        showGameComplete();
        return;
      }
      
      const question = questions[currentGameQuestion];
      document.getElementById('gameEmoji').textContent = question.emoji;
      document.getElementById('gameQuestion').textContent = question.q;
      document.getElementById('gameResult').classList.add('hidden');
      
      const optionsEl = document.getElementById('gameOptions');
      optionsEl.innerHTML = '';
      
      question.options.forEach((option, index) => {
        const btn = document.createElement('button');
        btn.className = 'game-card p-6 rounded-xl text-xl font-bold text-white';
        btn.textContent = option;
        btn.onclick = () => checkAnswer(option, question.answer);
        
        gsap.fromTo(btn,
          { opacity: 0, scale: 0.8 },
          { opacity: 1, scale: 1, duration: 0.3, delay: index * 0.1 }
        );
        
        optionsEl.appendChild(btn);
      });
      
      document.getElementById('nextGameBtn').classList.add('hidden');
    }

    function checkAnswer(selected, correct) {
      const resultEl = document.getElementById('gameResult');
      resultEl.classList.remove('hidden');
      
      if (selected === correct) {
        resultEl.textContent = 'üéâ Correct! +10 XP';
        resultEl.className = 'text-2xl font-bold mb-4 neon-text';
        gameScore += 10;
        userStats.totalXP += 10;
        document.getElementById('totalXP').textContent = userStats.totalXP;
      } else {
        resultEl.textContent = '‚ùå Incorrect! Keep trying!';
        resultEl.className = 'text-2xl font-bold mb-4 text-red-400';
      }
      
      document.getElementById('gameScore').textContent = gameScore;
      document.getElementById('nextGameBtn').classList.remove('hidden');
      
      document.querySelectorAll('#gameOptions button').forEach(btn => {
        btn.onclick = null;
        btn.style.opacity = '0.5';
      });
    }

    document.getElementById('nextGameBtn').addEventListener('click', function() {
      currentGameQuestion++;
      loadGame();
    });

    function loadTileGame() {
      const titles = {
        math: 'üî¢ Math Path Master',
        science: 'üî¨ Science Path Master',
        english: 'üìö Language Path Master'
      };
      
      document.getElementById('tileGameTitle').textContent = titles[currentGameType];
      document.getElementById('tileGameScore').textContent = gameScore;
      document.getElementById('tileCurrentLevel').textContent = currentLevel;
      
      loadTileQuestion();
    }

    function loadTileQuestion() {
      const questions = gameQuestions[currentGameType][userGrade] || gameQuestions[currentGameType]['1'];
      
      if (currentGameQuestion >= questions.length) {
        showTileGameComplete();
        return;
      }
      
      const question = questions[currentGameQuestion];
      
      if (!question.isTileGame) {
        currentGameQuestion++;
        loadTileQuestion();
        return;
      }
      
      document.getElementById('tileQuestion').textContent = question.q;
      document.getElementById('nextTileBtn').classList.add('hidden');
      
      const character = document.getElementById('gameCharacter');
      character.style.transition = 'none';
      character.style.transform = 'translateX(0)';
      character.innerHTML = '';
      
      setTimeout(() => {
        character.style.transition = 'all 0.5s ease';
      }, 50);
      
      const tileRow = document.getElementById('tileRow');
      tileRow.innerHTML = '';
      
      question.options.forEach((option, index) => {
        const tile = document.createElement('div');
        tile.className = 'tile';
        tile.textContent = option;
        tile.dataset.answer = option;
        
        tile.onclick = () => checkTileAnswer(tile, option, question.answer, index);
        
        gsap.fromTo(tile,
          { opacity: 0, y: -50 },
          { opacity: 1, y: 0, duration: 0.4, delay: index * 0.15 }
        );
        
        tileRow.appendChild(tile);
      });
    }

    function checkTileAnswer(tile, selected, correct, index) {
      const character = document.getElementById('gameCharacter');
      
      const moveDistance = (index * 140) + 30;
      character.style.transform = `translateX(${moveDistance}px)`;
      
      document.querySelectorAll('#tileRow .tile').forEach(t => {
        t.onclick = null;
        t.style.cursor = 'default';
      });
      
      setTimeout(() => {
        if (selected === correct) {
          tile.classList.add('correct');
          character.innerHTML = 'üéâ';
          gameScore += 15;
          userStats.totalXP += 15;
          document.getElementById('tileGameScore').textContent = gameScore;
          document.getElementById('totalXP').textContent = userStats.totalXP;
          
          showModal('‚úÖ', 'Perfect!', '+15 XP! You chose the right path! üéâ');
          
          setTimeout(() => {
            document.getElementById('nextTileBtn').classList.remove('hidden');
          }, 1500);
        } else {
          tile.classList.add('wrong');
          character.innerHTML = 'üò±';
          
          showModal('üí•', 'Oops!', 'Wrong tile! The character fell! Try the next challenge! üí™');
          
          setTimeout(() => {
            document.getElementById('nextTileBtn').classList.remove('hidden');
          }, 1500);
        }
      }, 600);
    }

    document.getElementById('nextTileBtn').addEventListener('click', function() {
      currentGameQuestion++;
      loadGame();
    });

    function showTileGameComplete() {
      document.getElementById('tileGameContent').innerHTML = `
        <div class="text-center">
          <div class="text-8xl mb-6">üèÜ</div>
          <h2 class="text-4xl font-bold neon-text mb-4">Level Complete!</h2>
          <p class="text-2xl text-white mb-6">Final Score: <span class="neon-pink">${gameScore} XP</span></p>
          <button onclick="levelUp('${currentGameType}')" class="space-btn bg-white/20 text-white px-8 py-4 rounded-xl font-bold text-xl mb-4">
            Advance to Next Level üöÄ
          </button>
          <button onclick="backToDashboard()" class="space-btn bg-gray-500/20 text-gray-300 px-8 py-4 rounded-xl font-bold text-xl">
            Return to Dashboard
          </button>
        </div>
      `;
    }

    function showGameComplete() {
      document.getElementById('gameContent').innerHTML = `
        <div class="text-center">
          <div class="text-8xl mb-6">üèÜ</div>
          <h2 class="text-4xl font-bold neon-text mb-4">Level Complete!</h2>
          <p class="text-2xl text-white mb-6">Final Score: <span class="neon-pink">${gameScore} XP</span></p>
          <button onclick="levelUp('${currentGameType}')" class="space-btn bg-white/20 text-white px-8 py-4 rounded-xl font-bold text-xl mb-4">
            Advance to Next Level üöÄ
          </button>
          <button onclick="backToDashboard()" class="space-btn bg-gray-500/20 text-gray-300 px-8 py-4 rounded-xl font-bold text-xl">
            Return to Dashboard
          </button>
        </div>
      `;
    }

    function levelUp(gameType) {
      if (gameType === 'math' && userStats.mathLevel < 10) {
        userStats.mathLevel++;
        document.getElementById('mathLevel').textContent = userStats.mathLevel;
        
        if (userStats.mathLevel % 3 === 0 && userStats.badgesEarned < 29) {
          userStats.badgesEarned++;
          document.getElementById('badgesEarned').textContent = userStats.badgesEarned;
          showModal('üèÜ', 'New Badge Earned!', `Congratulations! You've earned a Math Master badge! üéâ`);
        }
      } else if (gameType === 'science' && userStats.scienceLevel < 10) {
        userStats.scienceLevel++;
        document.getElementById('scienceLevel').textContent = userStats.scienceLevel;
        
        if (userStats.scienceLevel % 3 === 0 && userStats.badgesEarned < 29) {
          userStats.badgesEarned++;
          document.getElementById('badgesEarned').textContent = userStats.badgesEarned;
          showModal('üèÜ', 'New Badge Earned!', `Congratulations! You've earned a Science Explorer badge! üéâ`);
        }
      } else if (gameType === 'english' && userStats.englishLevel < 10) {
        userStats.englishLevel++;
        document.getElementById('englishLevel').textContent = userStats.englishLevel;
        
        if (userStats.englishLevel % 3 === 0 && userStats.badgesEarned < 29) {
          userStats.badgesEarned++;
          document.getElementById('badgesEarned').textContent = userStats.badgesEarned;
          showModal('üèÜ', 'New Badge Earned!', `Congratulations! You've earned a Language Master badge! üéâ`);
        }
      }
      
      backToDashboard();
    }

    function backToDashboard() {
      showSection('dashboardSection');
    }

    // ========== AI CHATBOT FUNCTIONALITY ==========
    
    const aiBtn = document.getElementById("ai-agent-btn");
    const chatbox = document.getElementById("chatbox");
    const closeChat = document.getElementById("close-chat");
    const chatWindow = document.getElementById("chat-window");
    const userInput = document.getElementById("user-input");
    const sendBtn = document.getElementById("send-btn");
    const typingIndicator = document.getElementById("typing-indicator");

    // Floating Button
    aiBtn.addEventListener("click", () => {
      chatbox.classList.toggle("hidden");
      if (!chatbox.classList.contains("hidden")) {
        const name = userName || "Student";
        typingAI(`Hey ${name}! Choose a subject: Math, Science, or Word Nebula.`);
      }
    });

    // Close Chat
    closeChat.addEventListener("click", () => {
      chatbox.classList.add("hidden");
    });

    // Send Message
    sendBtn.addEventListener("click", sendMessage);
    userInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") sendMessage();
    });

    function sendMessage() {
      const msg = userInput.value.trim();
      if (!msg) return;
      displayMessage(msg, "user");
      userInput.value = "";
      handleUserResponse(msg.toLowerCase());
    }

    function displayMessage(msg, sender) {
      const div = document.createElement("div");
      div.classList.add("message", sender === "ai" ? "ai-message" : "user-message");
      div.innerText = msg;
      chatWindow.appendChild(div);
      chatWindow.scrollTop = chatWindow.scrollHeight;
    }

    function handleUserResponse(msg) {
      if (!currentSubject) {
        if (msg.includes("math")) currentSubject = "math";
        else if (msg.includes("science")) currentSubject = "science";
        else if (msg.includes("word")) currentSubject = "wordNebula";
        else return typingAI("Please select: Math, Science, or Word Nebula.");

        questions = chatbotQuestions[currentSubject];
        currentQuestionIndex = 0;
        chatScore = 0;
        sendNextQuestion();
      } else {
        checkChatAnswer(msg);
      }
    }

    function typingAI(msg, delay = 1000) {
      typingIndicator.classList.remove("hidden");
      setTimeout(() => {
        typingIndicator.classList.add("hidden");
        sendAIMessage(msg);
      }, delay);
    }

    function sendNextQuestion() {
      if (currentQuestionIndex >= questions.length) {
        typingAI(`üéâ Completed ${currentSubject}! Score: ${chatScore}/${questions.length}`);
        currentSubject = "";
        return;
      }
      typingAI(questions[currentQuestionIndex].question, 1200);
    }

    function checkChatAnswer(msg) {
      const correct = questions[currentQuestionIndex].answer.toLowerCase();
      if (msg === correct) {
        typingAI("‚úÖ Correct!", 800);
        chatScore++;
        userStats.totalXP += 5;
        document.getElementById('totalXP').textContent = userStats.totalXP;
      } else {
        typingAI(`‚ùå Wrong! Hint: Think carefully.`, 800);
      }
      currentQuestionIndex++;
      setTimeout(sendNextQuestion, 1500);
    }

    function sendAIMessage(msg) {
      displayMessage(msg, "ai");
    }

    function switchSubject(newSub) {
      if (newSub === currentSubject) return typingAI(`Already in ${newSub}.`);
      if (!chatbotQuestions[newSub]) return typingAI("Subject not found!");
      currentSubject = newSub;
      questions = chatbotQuestions[newSub];
      currentQuestionIndex = 0;
      chatScore = 0;
      typingAI(`Switched to ${newSub}! Let's start.`, 800);
      setTimeout(sendNextQuestion, 1000);
    }

    // Initialize
    createStars();
    
    setTimeout(() => {
      const mottoWords = document.querySelectorAll('.motto-word');
      gsap.to(mottoWords, {
        opacity: 1,
        y: 0,
        duration: 0.8,
        stagger: 0.3,
        delay: 3.5,
        ease: 'back.out(1.7)'
      });
    }, 100);
    
    console.log('üöÄ NeuroPlay Professional Platform Initialized!');
  </script>

</body>
</html> "What comes after 5?", options: ["4", "6", "7", "8"], answer: "6", emoji: "üî¢", isTileGame: true },
          { q: "How many stars? ‚≠ê‚≠ê‚≠ê", options: ["2", "3", "4", "5"], answer: "3", emoji: "‚≠ê" },
          { q: "2 + 1 = ?", options: ["2", "3", "4", "5"], answer: "3", emoji: "‚ûï", isTileGame: true },
          { q: "Which is bigger: 3 or 5?", options: ["3", "5", "Same", "Neither"], answer: "5", emoji: "üîç" },
          { q: "Count: üçéüçéüçéüçé", options: ["3", "4", "5", "6"], answer: "4", emoji: "üçé", isTileGame: true },
          { q: "3 - 1 = ?", options: ["1", "2", "3", "4"], answer: "2", emoji: "‚ûñ" },
          { q: "What shape is this? ‚≠ï", options: ["Square", "Circle", "Triangle", "Star"], answer: "Circle", emoji: "‚≠ï", isTileGame: true },
          { q: "How many fingers? üñêÔ∏è", options: ["4", "5", "6", "10"], answer: "5", emoji: "üñêÔ∏è" },
          { q: "1 + 1 = ?", options: ["1", "2", "3", "4"], answer: "2", emoji: "‚ûï", isTileGame: true },
          { q: "What comes before 10?", options: ["8", "9", "11", "7"], answer: "9", emoji: "üî¢" }
        ],
        "1": [
          { q: "5 + 3 = ?", options: ["6", "7", "8", "9"], answer: "8", emoji: "üî¢", isTileGame: true },
          { q: "10 - 4 = ?", options: ["5", "6", "7", "8"], answer: "6", emoji: "‚ûñ" },
          { q: "Count by 2s: 2, 4, __, 8", options: ["5", "6", "7", "10"], answer: "6", emoji: "üéØ", isTileGame: true },
          { q: "7 + 2 = ?", options: ["8", "9", "10", "11"], answer: "9", emoji: "‚ûï" },
          { q: "15 - 5 = ?", options: ["8", "9", "10", "11"], answer: "10", emoji: "‚ûñ", isTileGame: true },
          { q: "Double of 4 is?", options: ["6", "7", "8", "9"], answer: "8", emoji: "‚úñÔ∏è" },
          { q: "9 + 1 = ?", options: ["9", "10", "11", "12"], answer: "10", emoji: "‚ûï", isTileGame: true },
          { q: "Half of 10 is?", options: ["4", "5", "6", "7"], answer: "5", emoji: "‚ûó" },
          { q: "12 - 3 = ?", options: ["8", "9", "10", "11"], answer: "9", emoji: "‚ûñ", isTileGame: true },
          { q: "6 + 6 = ?", options: ["10", "11", "12", "13"], answer: "12", emoji: "‚ûï" }
        ],
        "2": [
          { q: "12 + 8 = ?", options: ["18", "19", "20", "21"], answer: "20", emoji: "üî¢", isTileGame: true },
          { q: "15 - 7 = ?", options: ["7", "8", "9", "10"], answer: "8", emoji: "‚ûñ" },
          { q: "3 √ó 4 = ?", options: ["10", "11", "12", "13"], answer: "12", emoji: "‚úñÔ∏è", isTileGame: true },
          { q: "20 √∑ 4 = ?", options: ["4", "5", "6", "7"], answer: "5", emoji: "‚ûó" },
          { q: "16 + 9 = ?", options: ["23", "24", "25", "26"], answer: "25", emoji: "‚ûï", isTileGame: true },
          { q: "5 √ó 5 = ?", options: ["20", "23", "25", "30"], answer: "25", emoji: "‚úñÔ∏è" },
          { q: "30 - 12 = ?", options: ["16", "17", "18", "19"], answer: "18", emoji: "‚ûñ", isTileGame: true },
          { q: "24 √∑ 6 = ?", options: ["3", "4", "5", "6"], answer: "4", emoji: "‚ûó" },
          { q: "7 √ó 3 = ?", options: ["19", "20", "21", "22"], answer: "21", emoji: "‚úñÔ∏è", isTileGame: true },
          { q: "45 - 18 = ?", options: ["25", "26", "27", "28"], answer: "27", emoji: "‚ûñ" }
        ],
        "3": [
          { q: "25 + 17 = ?", options: ["40", "41", "42", "43"], answer: "42", emoji: "üî¢", isTileGame: true },
          { q: "6 √ó 7 = ?", options: ["40", "41", "42", "43"], answer: "42", emoji: "‚úñÔ∏è" },
          { q: "48 √∑ 6 = ?", options: ["6", "7", "8", "9"], answer: "8", emoji: "‚ûó", isTileGame: true },
          { q: "56 - 29 = ?", options: ["25", "26", "27", "28"], answer: "27", emoji: "‚ûñ" },
          { q: "8 √ó 9 = ?", options: ["70", "71", "72", "73"], answer: "72", emoji: "‚úñÔ∏è", isTileGame: true },
          { q: "63 √∑ 9 = ?", options: ["6", "7", "8", "9"], answer: "7", emoji: "‚ûó" },
          { q: "34 + 28 = ?", options: ["60", "61", "62", "63"], answer: "62", emoji: "‚ûï", isTileGame: true },
          { q: "12 √ó 5 = ?", options: ["58", "59", "60", "61"], answer: "60", emoji: "‚úñÔ∏è" },
          { q: "81 √∑ 9 = ?", options: ["7", "8", "9", "10"], answer: "9", emoji: "‚ûó", isTileGame: true },
          { q: "100 - 43 = ?", options: ["55", "56", "57", "58"], answer: "57", emoji: "‚ûñ" }
        ],
        "4": [
          { q: "125 + 78 = ?", options: ["201", "202", "203", "204"], answer: "203", emoji: "üî¢", isTileGame: true },
          { q: "12 √ó 8 = ?", options: ["94", "95", "96", "97"], answer: "96", emoji: "‚úñÔ∏è" },
          { q: "144 √∑ 12 = ?", options: ["10", "11", "12", "13"], answer: "12", emoji: "‚ûó", isTileGame: true },
          { q: "256 - 89 = ?", options: ["165", "166", "167", "168"], answer: "167", emoji: "‚ûñ" },
          { q: "15 √ó 11 = ?", options: ["163", "164", "165", "166"], answer: "165", emoji: "‚úñÔ∏è", isTileGame: true },
          { q: "225 √∑ 15 = ?", options: ["13", "14", "15", "16"], answer: "15", emoji: "‚ûó" },
          { q: "345 + 267 = ?", options: ["610", "611", "612", "613"], answer: "612", emoji: "‚ûï", isTileGame: true },
          { q: "18 √ó 7 = ?", options: ["124", "125", "126", "127"], answer: "126", emoji: "‚úñÔ∏è" },
          { q: "400 - 156 = ?", options: ["242", "243", "244", "245"], answer: "244", emoji: "‚ûñ", isTileGame: true },
          { q: "196 √∑ 14 = ?", options: ["12", "13", "14", "15"], answer: "14", emoji: "‚ûó" }
        ],
        "5": [
          { q: "456 + 289 = ?", options: ["743", "744", "745", "746"], answer: "745", emoji: "üî¢", isTileGame: true },
          { q: "15 √ó 13 = ?", options: ["193", "194", "195", "196"], answer: "195", emoji: "‚úñÔ∏è" },
          { q: "What is 3/4 + 1/4?", options: ["1/2", "3/4", "1", "5/4"], answer: "1", emoji: "üìä", isTileGame: true },
          { q: "567 - 298 = ?", options: ["267", "268", "269", "270"], answer: "269", emoji: "‚ûñ" },
          { q: "24 √ó 15 = ?", options: ["358", "359", "360", "361"], answer: "360", emoji: "‚úñÔ∏è", isTileGame: true },
          { q: "What is 2/5 of 100?", options: ["35", "40", "45", "50"], answer: "40", emoji: "üìä" },
          { q: "789 + 456 = ?", options: ["1243", "1244", "1245", "1246"], answer: "1245", emoji: "‚ûï", isTileGame: true },
          { q: "Prime number after 7?", options: ["9", "10", "11", "12"], answer: "11", emoji: "üî¢" },
          { q: "1000 - 567 = ?", options: ["431", "432", "433", "434"], answer: "433", emoji: "‚ûñ", isTileGame: true },
          { q: "Square of 12 is?", options: ["142", "143", "144", "145"], answer: "144", emoji: "¬≤" }
        ]
      },
      science: {
        K: [
          { q: